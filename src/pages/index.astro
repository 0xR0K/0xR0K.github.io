---
import Layout from '../layouts/Layout.astro';
import PostCard from '../components/PostCard.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.date.valueOf() - a.data.date.valueOf()
);
---

<Layout title="Inicio" description="Toda una vida conectado - Bitácora de un administrador.">
	<section class="posts-grid">
		{
			posts.map((post) => (
				<PostCard
					title={post.data.title}
					date={post.data.date}
					url={`/articulos/${post.slug}/`}
					slug={post.slug}
				/>
			))
		}
	</section>
</Layout>

<style>
	/* --- DISEÑO BASE (Móvil) --- */
	.posts-grid {
		display: grid;
		/* 1 columna que ocupa todo el ancho */
		grid-template-columns: 1fr; 
		gap: 30px;
	}

	/* --- DISEÑO ESCRITORIO --- */
	/* Se activa SOLO si la pantalla es mayor a 768px (Tablets y PC) */
	@media (min-width: 768px) {
		.posts-grid {
			/* Forzamos 2 columnas de igual tamaño */
			grid-template-columns: repeat(2, 1fr); 
		}
	}
</style>
